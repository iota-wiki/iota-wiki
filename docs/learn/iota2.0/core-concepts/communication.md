---
description: Overview of the communication layer in IOTA 2.0, focusing on congestion control, the scheduler, and tip selection.
keywords:
  [
    'IOTA 2.0',
    'Communication layer',
    'Congestion control',
    'Scheduler',
    'Tip selection',
    'Mana',
  ]
---

# Communication Layer

Every network must manage its inherent limitations in bandwidth and node capabilities, including processing power and
storage.
Consequently, it's crucial to introduce a mechanism that regulates [block](data-structures.md#blocks) issuance in the
network.
IOTA 2.0's approach is based on an amount of [Mana](mana.md) per block that any block issuer must consume,
and a set of rules to manage the scheduling buffer.
This strategy ensures fair throughput allocation, minimal dissemination latency, and predictable guarantees for block
issuers while satisfying the following requirements:

- **Consistency**: If one honest user issues a block, all other honest users should book it within some delay
  bound.
- **Fairness**: Block issuers can access a share of the available throughput proportional to their Mana.
- **Security**: Malicious users should not be able to interfere with the above requirements.

Our approach allows the [Mana](mana.md) generated by _transaction outputs_ to immediately pay for block creation.
The burnt amount changes over time based on the recent congestion level inferred from the number of blocks
included in recent slot commitments.

Key features of this approach include:

- Mana is a consumable resource that is burnt for block issuance.
- Mana generated by accounts holding tokens can be used to issue blocks containing their consuming transactions.
- Artificially inflating the value of Mana through spam is economically unfeasible due to Mana consumption.
- The solution provides predictable guarantees and maximizes the number of confirmed blocks.

## Mana balance and Issuer Deposit

Mana balance is updated once the block is included in a [slot commitment](data-structures.md#slot-commitments),
rather than when the block is received.
While this allows issuers to temporarily go into Mana debt, we ensure that attackers' actions cannot affect honest
users' throughput since the congestion control protects network [nodes](networking.md#nodes) against spammers and other
malicious actions. Issuers are required to lock a small IOTA token _issuer deposit_ as collateral to ensure that
accounts remain in Mana debt only temporarily, and the debt is eventually repaid by the Mana generated by such a deposit.

## Block Creation and Processing

The [data flow](data-flow.md) for ICCA at a given node involves several modules. Upon block creation, we can identify
the following
modules:

- **Mana Burn Calculator**: Determines the amount of Mana to be burned by each block for a given slot.
- **Mana Updater**: Updates Mana balances upon commitment, subtracting the Mana burned by blocks and adding the Mana
  allotted by transactions.
- **Account Output**: Registers the block issuer on the ledger and deposits IOTA tokens as collateral for potential
  misbehavior.

As for received blocks, they trigger the following modules:

- **Filter Checks**: Verifies whether incoming blocks burn enough Mana and are issued by valid accounts.
- **Scheduler**: Maintains individual queues for each block issuer and schedules blocks to be gossiped from them,
  keeping access control in place and deciding what information to drop in case of a full buffer.

Scheduled blocks are added to the tip pool and gossiped to all neighbors through flooding.
